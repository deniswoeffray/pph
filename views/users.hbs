{{#> baseLayout }}

    {{#*inline "content-block"}}
        <h1>Liste des utilisateurs</h1>
        <form class = "form-group" action='/users' method='POST'>
            <div id="add_user_form">
                <input name="lastname" class="col-md-1 form-control" type="text" placeholder="Lastname here"/>
                <input name="firstname" class="col-md-1 form-control" type="text" placeholder="Firstname here"/>
                <input name="email" class="col-md-2 form-control" type="text" placeholder="Email here"/>
                <input name="password" class="col-md-2 form-control" type="password" placeholder="Password here"/>
                <select name="role" class="col-md-1 form-control">
                    <option value="user">user</option>
                    <option value="admin">admin</option>
                </select>
                <button type ="submit" class="btn btn-primary" name="addUserButton">Add user</button>
            </div>
        </form>

        <div class="form-group" id="user_list_labels">
            <input id="user-id" class="col-md-1 form-control" type="text" value="Id" readonly/>
            <input id="user-lastname-label" class="col-md-1 form-control" type="text" value="Nom" readonly/>
            <input id="user-firstname-label" class="col-md-1 form-control" type="text" value="Prenom" readonly/>
            <input id="user-email-label" class="col-md-2 form-control" type="text" value="E-mail" readonly/>
            <input id="user-password-label" class="col-md-2 form-control" type="text" value="Mot de passe" readonly/>
            <input id="user-role-label" class="col-md-1 form-control" type="text" value="RÃ´le" readonly/>
        </div>

        {{#each users}}
            <form class="form-group">
                <div id="user_list" class="form-group">
                    <input id="user-{{this.id}}" class="col-md-1 form-control" type="text" value="{{this.id}}" readonly />
                    <div id="editable_fields">
                        <input id="user-{{this.id}}-lastname" class="col-md-1 form-control" name="lastname" type="text" value="{{this.nom}}" readonly/>
                        <input id="user-{{this.id}}-firstname" class="col-md-1 form-control" name="firstname" type="text" value="{{this.prenom}}" readonly/>
                        <input id="user-{{this.id}}-email" class="col-md-2 form-control" name="email" type="text" value="{{this.email}}" readonly/>
                        <input id="user-{{this.id}}-password" class="col-md-2 form-control" name="password" type="password" readonly/>
                        <input id="user-{{this.id}}-role-readonly" class="col-md-1 form-control" name="role-readonly" type="text" value="{{this.role}}" readonly/>
                        <select id="user-{{this.id}}-role" class="col-md-1 form-control" name="role" style="display:none">
                            <option value="user">user</option>
                            <option value="admin">admin</option>
                        </select>
                        <button id="editUserButton-{{this.id}}"type="button" class="btn btn-primary" onclick="showForm({{this.id}})" >Ã‰diter</button>
                        <button id="saveUserButton-{{this.id}}" type="button" class="btn btn-primary" onclick="updateUser({{this.id}}, this.form)" style="display:none" >Sauver</button>
                        <button type="button" class="btn btn-primary" onclick="deleteUser({{this.id}})" >Supprimer</button>
                    </div>
                </div>
            </form>
        {{/each}}
    {{/inline}}

    {{#*inline "scripts-block"}}
    {{/inline}}
{{/baseLayout}}
<script src='javascripts/users.js'></script>

